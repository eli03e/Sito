<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>Registro Presenze - Bounce Swing Lovers</title>
<style>
body {
    font-family: Arial;
    background: #f2f2f2;
    padding: 10px;
}
.container {
    max-width: 480px;
    margin: auto;
    background: white;
    padding: 15px;
    border-radius: 10px;
}
h1 {
    text-align: center;
    font-size: 1.5em;
}
select, input[type="date"] {
    width: 100%;
    padding: 12px;
    margin-bottom: 15px;
    font-size: 1em;
    border-radius: 5px;
    border: 1px solid #ccc;
    box-sizing: border-box; /* assicura che padding e bordo siano inclusi nella larghezza */
}
ul {
    list-style: none;
    padding: 0;
    margin: 0;
}
li {
    display: flex;
    flex-direction: column;
    padding: 12px 8px;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
}
li div {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
}
li input[type="checkbox"] {
    transform: scale(1.5);
    margin-left: 10px;
}
li textarea {
    width: 100%;
    margin-top: 5px;
    padding: 8px;
    border-radius: 5px;
    border: 1px solid #ccc;
    font-size: 0.9em;
    resize: vertical;
}
button {
    width: 100%;
    padding: 15px;
    margin-top: 15px;
    background: #27ae60;
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 1.2em;
    cursor: pointer;
}
button:active {
    background: #219150;
}
@media screen and (max-width: 400px){
    li div {
        flex-direction: column;
        align-items: flex-start;
    }
    li input[type="checkbox"] {
        margin-left: 0;
        margin-top: 5px;
    }
}
</style>
</head>
<body>

<div class="container">
<h1>Registro Presenze</h1>

<label>Disciplina:</label>
<select id="corso"></select>

<label>Data lezione:</label>
<input type="date" id="data">

<ul id="listaStudenti"></ul>

<button onclick="salva()">Salva Presenze</button>
</div>

<script>
// ==== Lista discipline e studenti ====
const corsi = {
  "Lindy Hop 1 PD Martedì": ["Alberto Bertossi", "Stefan Bizzotto", "Ilaria Bocola", "Alvise Bolzonella", "Elisabetta BRendolin", "Bruno Cacciavillani", "Elisabetta Cesaro", "Emanuela Crivellaro", "Ermanno Di Frenna", "Maria Fiorin", "Alexandra Gorgan", "Zertihun Gozzi", "Silvia Granieri", "Enrico Guarnieri", "Caterina Juhasz", "Chiara Marchetti", "Krizia Nobile", "Aurora Peloso", "Silvia Peruzzo", "Filippo Sinigaglia", "Alban Tamisier", "Laura Trevisan", "Luca Zattarin"],
  "Lindy Hop 1 PD Mercoledì": [" Lorella Baldin", "Sara Bencivelli", "Anita Botton", "Angelo Brencich", "Giulia Caprari", "Doriana Chiarentin", "Chiara Cosci", "Stefano Corradin", "Franco Da Re", "Paola De Vecchi", "Elisa Dona'", "Marco Emanuele", "Claudia Favero", "Elisa Fiabane", "Carlo Alberto Flora", "Eva Franceschini", "Federica Graziosi", "Giovan Battista Impallomeni", "Marta Ippolito", "Francesco Malvasi", "Federica Laura Manna", "Marco Miglietta", "Samuele Pedrielli", "Gabrele Perini", "Michele Pizzeghello", "Maria Francesca Politano", "Clara Pomoni", "Simone Quaglio", "Isabella Rizzi", "Iris Santagata", "Claudio Scarano", "Elena Tonellotto", "Roberta Zamberlan", "Daniela Zuin", "Elisa Zambotto", "Linda Torelli"],
  "Lindy Hop 1 VE Giovedì": ["Elisabetta Amadi", "Anna Battaglia", "Mauro Baronchelli", "Roberta Beccari", "Margherita Berardi", "Caterina Bonelli", "Valentina Brailovich", "Marco Broggio", "Margherita Camillo", "Caterina Cecchini", "Giacomo Filagrana", "Silvia Fontana", "Marion Houssin", "Noemi Martina Licitra", "Anna Lopriore", "Tommaso Macelloni", "Giulia Marcelloni", "Giulia Miozzari", "Elena Orlandi", "Lucy Pesce", "Elena Petrovska", "Silvano Rossetti", "Giulia Serafin", "Giorgia Starace", "Stefano Stomeo", "Greta Toppan", "Cristina Zago", "Beatrice Zerbinato"],
  "Blues 1 PD Lunedì": ["Alberto Bertossi", "Samuele Pedrielli", "Mariagiulia Masiero", "Luisa Romano", "Antonio Trivellato"],
  "Balboa 1 PD Mercoledì": ["Carla Biasibetti", "Alberto Bertossi", "Fabio Bragola", "Gianfranco Danieli", "Margherita Richieri Richieri", "Bianca Spangel", "Nicola Varotto"],
  "Solo Jazz 1 PD Martedì": ["Elisa Fiabane", "Alessandra Lucido", "Patrizia Piovan", "Deborah Scorzelli", "Irene Viezzoli", "Michela Zorzan"],
  "Shag 1 PD Martedì": ["Flavio Benasciutti", "Margherita Borsoi", "Mariangela Caforio", "Rodica Calancea", "Federico Caparotto", "Carlo Ciulla", "Giorgia Dalla Libera", "Hela Machiedo", "Ivan Turco", "Elena Venerus", "Irene Venturini", "Elena Zamò"],
  "Balboa 1 TV Giovedì": ["Mariangela Bernardi", "Caterina Burlini", "Giuseppe Cadorin", "Camilla Cescon", "Cristina Cultrera", "Paola Favaro", "Lorenzo Ferraro", "Mattia Antonio Marano", "Tommaso Salviati", "Carmelita Velardita", "Gabriele Zanuttigh"],
  "Lindy 2 PD Lunedì": ["Danilo Cargione", "Marco Cavarzan", "Hélène Deleris", "Alice Di Sisti", "Ottavia Guidi", "Margherita Lera", "Alice Malaguti", "Mariagiulia Masiero", "Roberta Mazzucco", "Linda Nordio", "Elisabetta Rampazzo", "Luisa Romano", "Micol Savastano", "Sandro Savino", "Anna Sensale", "Bianca Spangel", "Matteo Tonello", "Antonio Trivellato", "Orazio Trivellato"],
  "Lindy Hop 2 PD Mercoledì": ["Alessio Abdolahyan", "Marco Avventi", "Federica Baldassi", "Davide Bernardi", "Beatrice Borghi", "Angelo Brencich", "Elena Busatto", "Chiara Capparotto", "Stefania Castrignano", "Marco Ciardo", "Marta Dal Corso", "Laura Dall'Aglio", "Marino Di Lorenzo", "Valerio Maria Di Pasquale Fiasca", "Diane Doolaeghe", "Elena Ferraris", "Francesco Folena", "Valentina Giorgetti", "Serena Luce", "Hela Machiedo", "Chiara Mangia", "Anna Mariotto", "Marianna Menegus", "Ketty Miraval", "Vittoria Morbiato", "Sara Musumeci", "Francesca Passlacqua", "Emma Gioia Pegoraro", "Marco Perin", "Giorgia Pistore", "Jean Denis Rosell", "Anastasia Santo", "Matteo Tonello", "Ivan Turco", "Caterina Ugolini", "Luis Enrique Valverde Fortanel", "Ester Varsalona", "Silvia Zampato"],
  "Balboa 2 PD Mercoledì": ["Giuliano Antonaci", "Elisabetta Basso", "Elena Benetello", "Giacommo Bortolami", "Alice Carpanese", "Elisa Franzoso", "Lucia Gecchelin", "Martino Grinzato", "Claudia Iannice", "Alessandra Lucido", "Ignazio Maniscalco", "Alessandro Michieli", "Luciano Monti", "Elia Rebellato", "Anna Urciolo"],
  "Balboa 2 TV Giovedì": ["Elisa Allegro", "Elena Battocchio", "Federica Denaro", "Francesco Claudio Gallo", "Antonio Marchetti", "Fabrizio Micheli", "Marisa Nicoletti", "Erik Olivotto", "Cristina Ponchia", "Laura Sacco Panchia", "Giulia Selmin", "Augusto Zanchetta", "Andrea Zambon"],
  "Lindy Hop 2 TV Giovedì": ["Tommaso Bertoldini", "Giulia Blascovich", "Gionatan Ciavatti", "Ilaria Di Nuzzo", "Alessandro Foffano", "Holgen Kazazi", "Barbara Ortolan", "Roberta Vianello", "Tiziana Zocca"],
  "Lindy Hop 3 PD Mercoledì": ["Alessandra Arthemalle", "Valerio Beato", "Elena Benetello", "Margherita Borsoi", "Alice Carpanese", "Elena Casagrande", "Isabella Cinque", "Gaia Comis", "Vittoria Cuteri", "Dario Favarato", "Claudia Isnnice", "Sabrina Lion", "Alessandra Lucido", "Mariachiara Manfredini", "Lara Mika", "Daniela Muffato", "Laura Perin", "Giovanni Peritore", "Federico Scianna", "Gustavo Tocchi", "Federica Tonazzini", "Alessandro Zago"],
  "Lindy Hop 4 TV Giovedì": ["Elisa Allegro", "Chiara Cescato", "Giovanni Comacchio", "Francesco Claudio Gallo", "Elisa Greco", "Matteo Marani", "Antonio Marchetti", "Fabrizio Micheli", "Marisa Nicoletti", "Erik Olivotto", "Davide Piscitelli", "Laura Sacco Panchia", "Giulia Selmin", "Giulia Sossai", "Francesca Vardiero", "Mauro Zanatta"]
};

// ==== Popola menu a tendina ====
const selectCorso = document.getElementById("corso");
Object.keys(corsi).forEach(c => {
  const option = document.createElement("option");
  option.value = c;
  option.textContent = c;
  selectCorso.appendChild(option);
});

// ==== Popola lista studenti dinamicamente ====
const listaStudenti = document.getElementById("listaStudenti");
function aggiornaStudenti() {
  listaStudenti.innerHTML = "";
  const studenti = corsi[selectCorso.value];
  studenti.forEach(s => {
    const li = document.createElement("li");
    
    // div per nome + checkbox
    const divTop = document.createElement("div");
    const spanNome = document.createElement("span");
    spanNome.textContent = s;
    divTop.appendChild(spanNome);

    const checkbox = document.createElement("input");
    checkbox.type = "checkbox";
    divTop.appendChild(checkbox);

    li.appendChild(divTop);

    // textarea per note
    const textarea = document.createElement("textarea");
    textarea.placeholder = "Note...";
    li.appendChild(textarea);

    listaStudenti.appendChild(li);
  });
}

// Aggiorna lista all'avvio e al cambio disciplina
selectCorso.addEventListener("change", aggiornaStudenti);
aggiornaStudenti();

// ==== Imposta data di default ====
document.getElementById("data").valueAsDate = new Date();

// ==== Salvataggio su Google Fogli ====
function salva() {
  const data = document.getElementById("data").value;
  const corso = selectCorso.value;
  const righe = listaStudenti.querySelectorAll("li");
  let presenze = [];

  righe.forEach(li => {
    const nome = li.querySelector("span").textContent.trim();
    const presente = li.querySelector("input[type='checkbox']").checked ? "X" : "";
    const note = li.querySelector("textarea").value.trim();
    presenze.push({data, corso, nome, presente, note});
  });

  fetch("https://script.google.com/macros/s/AKfycbyZilAQLbhTnnpm4BcRoOhPBfKCU3P4NFY10IVKq9rICzDzqUH6_rEgdV580J8xfPy3vg/exec", {
    method: "POST",
    body: JSON.stringify(presenze)
  })
  .then(res => res.text())
  .then(msg => alert("Presenze salvate con successo!"))
  .catch(err => alert("Errore nel salvataggio: " + err));
}
</script>

</body>
</html>
